webpackJsonp([15],{"/4Hg":function(t,e){},MLl5:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("PJh5"),r=a.n(n),i={name:"contest",data:function(){return{loading:!0,search:"",currentPage:1,pageSize:15,contestList:[],total:0}},methods:{sendSearch:function(t){var e="?keyWords="+t;this.vueTable(e)},handleSizeChange:function(t){this.pageSize=t},handleCurrentChange:function(t){this.currentPage=t;var e="?pageNum="+this.currentPage;null!=this.search&&(e+="&keyWords="+this.search),this.vueTable(e)},filterHandler:function(t,e,a){return e[a.property]===t},returnStatus:function(t){var e=void 0;switch(t){case-1:e="Pending";break;case 0:e="Ended";break;case 1:e="Running"}return e},returnColor:function(t){var e=void 0;switch(t){case-1:e="";break;case 0:e="danger";break;case 1:e="success"}return e},vueTable:function(t){var e=this;this.$axios.get("contest/all"+t).then(function(t){e.contestList=t.data.data.pageInfo,e.total=t.data.data.total;for(var a=Date.parse(new Date),n=0;n<e.contestList.length;n++)a<e.contestList[n].startTime?e.contestList[n].status=-1:a>e.contestList[n].endTime?e.contestList[n].status=0:e.contestList[n].status=1;e.loading=!1})},dateFormat:function(t,e){var a=t[e.property];return void 0==a?"":r()(a).format("YYYY-MM-DD HH:mm:ss")},row:function(t,e){return"rowColor"},tableRowClassName:function(t){t.row,t.rowIndex;return"warning-row"}},created:function(){this.vueTable("")},beforeRouteLeave:function(t,e,a){var n=Date.parse(new Date);if("Exam"==t.meta.title)for(var r=0;r<this.contestList.length;r++)t.params.cid==this.contestList[r].cid&&(n<this.contestList[r].endTime?a():this.$notify.warning({title:"失败",message:"测试已结束",duration:2e3}));else if("Check"==t.meta.title)for(var i=0;i<this.contestList.length;i++)t.params.cid==this.contestList[i].cid&&(n>=this.contestList[i].endTime?a():n>=this.contestList[i].startTime?this.$notify.warning({title:"测试未结束",message:"请测试结束后查看",duration:2e3}):this.$notify.warning({title:"测试未开始",message:"请测试开始并完成后查看",duration:2e3}));else a()}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"block"},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"text",placeholder:"请输入测试名字",clearable:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),a("el-button",{attrs:{icon:"el-icon-search",circle:""},on:{click:function(e){return t.sendSearch(t.search)}}}),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"filterTable",staticStyle:{"margin-top":"10px","border-radius":"5px","box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.15)","min-height":"480px"},attrs:{"element-loading-text":"loading...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.15)",data:t.contestList,"row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{resizable:!1,align:"center",prop:"cid",label:"ID",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"cname",label:"测试名字","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("router-link",{staticStyle:{"font-weight":"bold"},attrs:{to:"/exam/cid/"+e.row.cid}},[t._v(t._s(e.row.cname))]):t._e(),t._v(" "),1!=e.row.status?a("el-link",{staticStyle:{"font-weight":"bold"},attrs:{href:"#",target:"_blank",disabled:""}},[t._v(t._s(e.row.cname))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{resizable:!1,formatter:t.dateFormat,prop:"startTime","min-width":"100",label:"开始时间"}}),t._v(" "),a("el-table-column",{attrs:{resizable:!1,formatter:t.dateFormat,prop:"endTime","min-width":"100",label:"结束时间"}}),t._v(" "),a("el-table-column",{attrs:{resizable:!1,align:"center",prop:"status",width:"100","filter-method":t.filterHandler,filters:[{text:"Pending",value:-1},{text:"Ended",value:0},{text:"Runing",value:1}]},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{staticClass:"tag",attrs:{"disable-transitions":"",type:t.returnColor(e.row.status),size:"medium"}},[t._v(t._s(t.returnStatus(e.row.status)))])]}}])},[a("template",{slot:"header"},[t._v("\n        状态\n        ")])],2),t._v(" "),a("el-table-column",{attrs:{resizable:!1,fixed:"right",align:"center",width:"100",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:"/check/cid/"+e.row.cid}},[a("el-button",{staticStyle:{"font-weight":"bold"},attrs:{type:"primary",plain:"",size:"small"}},[t._v("查看")])],1)]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,background:"",layout:"total, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]};var o=a("VU/8")(i,s,!1,function(t){a("/4Hg")},"data-v-30881f29",null);e.default=o.exports}});
//# sourceMappingURL=15.6efa4e441fa37bc05583.js.map